webpackJsonp([5],{"31hi":function(e,t){},"3zJm":function(e,t){},"4vW5":function(e,t){},"8cNM":function(e,t){},TxSf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),i=a.n(s),r=a("9rMa"),l={data:function(){return{departmentTree:[],departmentOptions:[{id:1,label:"客服部门"},{id:2,label:"电销部门"},{id:4,label:"网销部门"},{id:8,label:"推广部门"}],saleOptions:[{id:81,label:"电销一组"},{id:82,label:"电销二组"}],isAdd:!1,updateVisible:!1,updateParams:{deptName:"",type:""},updateLevel:0,updateType:0,updateRelevIds:[],updateRules:{deptName:[{required:!0,message:"输入不能为空",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择子部门",trigger:"change"}],relevIds:[{required:!0,message:"选择关联咨询组",trigger:"change"}]}}},computed:i()({},Object(r.d)({userInfo:function(e){return e.user.userInfo}})),watch:{updateRelevIds:function(e){this.updateParams.relevIds=e.join(",")}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.API.qryDept().then(function(t){t.result&&t.result.length&&(e.departmentTree=t.result,e.handleDept(e.departmentTree,1==e.userInfo.deptLevel)),e.$emit("change",{})}).catch(function(e){console.log("error:"+e.message)})},handleDept:function(e,t){var a=this;e&&e.length&&e.forEach(function(e){var s=t||a.userInfo.deptIdFk==e.id;e.hasPerm=s,e.children&&e.children.length&&a.handleDept(e.children,s)})},qryDeptSaleById:function(e,t){var a=this;if((4==e.level&&t||5==e.level)&&1==e.type){if(this.updateRelevIds=[],5==e.level)if(e.relevIds&&e.relevIds.length)e.relevIds.split(",").forEach(function(e){a.updateRelevIds.push(parseInt(e))});this.API.qryDeptSaleById({deptId:e.id}).then(function(e){console.log(e),a.saleOptions=e.result})}},handleSelect:function(e,t){this.$emit("change",t)},handleStop:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},handleUpdate:function(e,t,a){if(this.handleStop(e),console.log(t),this.qryDeptSaleById(t,a),a){if(this.isAdd=!0,t.level>=5)return void this.$message({message:"最多添加五级",type:"warning"});this.updateParams={parentDeptId:t.id},4==t.level&&(this.updateParams.type=t.type)}else this.isAdd=!1,this.updateParams={deptId:t.id,deptName:t.label,type:t.type};this.updateLevel=t.level,this.updateType=t.type,this.updateVisible=!0},handleDelete:function(e,t){var a=this;this.handleStop(e),this.$confirm("确定删除部门("+t.label+")吗？","操作提示").then(function(e){"confirm"===e&&a.API.delDept({deptId:t.id}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.getList()})})},beforeSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updateVisible=!1,t.handleSubmit()})},handleSubmit:function(){var e=this,t=this.isAdd?"addDept":"mdfDept";this.API[t](this.updateParams).then(function(t){e.$message({type:"success",message:"保存成功！"}),e.getList()})},renderContent:function(e,t){var a=this,s=t.node,i=t.data;t.store;return i.hasPerm?5==i.level||8==i.type?e("span",{class:"custom-node"},[e("span",{class:"title",on:{click:function(e){a.handleSelect(e,i)}}},[s.label]),e("p",{class:"icon"},[e("img",{attrs:{src:"/static/img/system/edit.png",title:"编辑"},on:{click:function(e){a.handleUpdate(e,i)}}}),e("img",{attrs:{src:"/static/img/system/delete.png",title:"删除"},on:{click:function(e){a.handleDelete(e,i)}}})])]):e("span",{class:"custom-node"},[e("span",{class:"title",on:{click:function(e){a.handleSelect(e,i)}}},[s.label]),e("p",{class:"icon"},[e("img",{attrs:{src:"/static/img/system/add.png",title:"新增"},on:{click:function(e){a.handleUpdate(e,i,1)}}}),e("img",{attrs:{src:"/static/img/system/edit.png",title:"编辑"},on:{click:function(e){a.handleUpdate(e,i)}}}),e("img",{attrs:{src:"/static/img/system/delete.png",title:"删除"},on:{click:function(e){a.handleDelete(e,i)}}})])]):e("span",{class:"custom-node"},[e("span",{class:"title",on:{click:function(e){a.handleSelect(e,i)}}},[s.label])])}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[e._m(0),e._v(" "),e.departmentTree.length?a("el-tree",{staticClass:"tree-wrap",attrs:{accordion:"",data:e.departmentTree,"render-content":e.renderContent,"highlight-current":!0}}):e._e(),e._v(" "),a("el-dialog",{staticClass:"left remove",attrs:{title:e.updateParams.deptId?"编辑部门":"新增部门",visible:e.updateVisible,"close-on-click-modal":!1,width:"480px"},on:{"update:visible":function(t){e.updateVisible=t}}},[a("el-form",{ref:"updateForm",staticClass:"demo-ruleForm",attrs:{model:e.updateParams,rules:e.updateRules,"label-width":"130px"}},[3==e.updateLevel&&e.isAdd||4==e.updateLevel&&!e.isAdd?a("el-form-item",{attrs:{label:"部门类型",prop:"type"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{disabled:!!e.updateParams.deptId,placeholder:"请选择部门类型"},model:{value:e.updateParams.type,callback:function(t){e.$set(e.updateParams,"type",t)},expression:"updateParams.type"}},e._l(e.departmentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"部门名称",prop:"deptName",placeholder:"请输入部门名称"}},[a("el-input",{staticStyle:{width:"280px"},model:{value:e.updateParams.deptName,callback:function(t){e.$set(e.updateParams,"deptName",t)},expression:"updateParams.deptName"}})],1),e._v(" "),1==e.updateType&&(4==e.updateLevel&&e.isAdd||5==e.updateLevel)?a("el-form-item",{attrs:{label:"选择关联咨询组",prop:"relevIds"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{multiple:"",placeholder:"请选择咨询组"},model:{value:e.updateRelevIds,callback:function(t){e.updateRelevIds=t},expression:"updateRelevIds"}},e._l(e.saleOptions,function(e){return a("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}))],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.beforeSubmit("updateForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"g-title"},[t("h2",[this._v("组织架构")])])}]};var o=a("Z0/y")(l,n,!1,function(e){a("4vW5"),a("8cNM")},"data-v-c64a00b6",null).exports,d=a("3cXf"),u=a.n(d),p=a("aA9S"),c=a.n(p),m=a("KPSb"),h=a.n(m),f={props:["deptId"],data:function(){return{list:[],page:{},params:{deptIdFk:"",status:"",roleIdFk:"",pageIndex:1,pageSize:10},statusOptions:[{id:1,label:"在职"},{id:0,label:"离职"}],roleOptions:[],updateDeptId:"",updateVisible:!1,updateParams:{deptName:"",type:""},departmentTree:[],departmentProps:{label:"label",value:"id"},updateDepartment:[],updateRoleOptions:[],updateRules:{deptName:[{required:!0,message:"输入不能为空",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择子部门",trigger:"change"}]}}},computed:i()({},Object(r.d)({userInfo:function(e){return e.user.userInfo}})),watch:{deptId:function(e,t){console.log(e,t),this.params={deptIdFk:e},this.search()}},created:function(){var e=this;this.API.qryRole().then(function(t){console.log(t),e.roleOptions=t.result}),this.API.qryDept({deptId:this.userInfo.deptIdFk}).then(function(t){console.log(t),e.departmentTree=t.result})},methods:{search:function(){var e=this;this.API.qryUser(this.params).then(function(t){console.log(t),e.list=t.result,e.page=t.page})},handlePageChange:function(e){this.params.pageIndex=e,this.search()},getDeptRole:function(){var e={type:this.userInfo.deptType,level:this.userInfo.deptLevel};this.API.getDeptRole(e).then(function(e){console.log(e)})},handleDelete:function(e){},handleUpdate:function(e){this.updateVisible=!0,this.getDeptRole(),e?(this.updateParams=e,this.updateDeptId=[e.deptIdFk],this.updateParams.transformPassword=e.password):this.updateParams={}},beforeSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updateVisible=!1,t.updateParams.deptIdFk=t.updateDeptId[t.updateDeptId.length-1],t.handleSubmit()})},handleSubmit:function(){var e=this,t=this.updateParams.userId?"mdfUser":"addUser";this.API[t](this.updateParams).then(function(t){e.$message({type:"success",message:"保存成功！"}),e.search()})},_find:function(){var e=this,t={};0==this.formInline.select&&(t.name=this.formInline.default),1==this.formInline.select&&(t.ID=this.formInline.default),2==this.formInline.select&&(t.mobile=this.formInline.default),"在职"==this.findFormInline[0].default&&(t.status=1),"离职"==this.findFormInline[0].default&&(t.status=0),t.roleIdFk=this.findFormInline[1].default,this.API.tissueGetSeat(t).then(function(t){for(var a=t.result,s=0;s<a.length;s++)1==a[s].status?a[s].status="在职":a[s].status="离职";e.seatDataWatch=a}).catch(function(e){console.log("error:"+e.message)})},tabEdit:function(e,t){if("groupName"==t)this.tabEditWarp(e,t,"legionName"),this.requiredOBJ.deptIdFk=e;else if("legionName"==t)7==this.isLabel||8==this.isLabel||9==this.isLabel?(this.tabEditWarp(e,t,"customName"),this.requiredOBJ.deptIdFk=e):6==this.isLabel?(this.tabEditWarp(e,t,"spreadName"),this.requiredOBJ.deptIdFk=e):(this.tabEditWarp(e,t,"saleName"),this.requiredOBJ.deptIdFk=e);else if("saleName"==t)this.tabEditWarp(e,t,"saleGroupName"),this.requiredOBJ.deptIdFk=e;else if("saleGroupName"==t)this.requiredOBJ.deptIdFk=e;else if("customName"==t)this.tabEditWarp(e,t,"customGroupName");else if("userGroupName"==t)return this.isLabel=e,this.requiredOBJ.roleIdFk=e,void this.isAlertList(e)},tabEditWarp:function(e,t,a){var s=this;this.API.seatAddChild({deptId:e}).then(function(e){var t=e.result;s.newsFormInline[a].list=t}).catch(function(e){console.log("error:"+e.message)})},newsEnter:function(e){var t=this;for(var a in this.newsFormInline)this.requiredOBJ[a]=this.newsFormInline[a].default;this.$refs[e].validate(function(e){if(e){t.API.seatgetUserAddUser(t.requiredOBJ).then(function(e){console.log(e)}).catch(function(e){console.log("error:"+e.message)}),sessionStorage.setItem("newsFormInline",u()(t.newsFormInline));var a=JSON.parse(sessionStorage.getItem("newsFormInline"));t.tableData.push(a),sessionStorage.clear("newsFormInline"),t.dialogFormVisible=!1}})},editEase:function(){this.EditList=JSON.parse(sessionStorage.getItem("indexedit")),this.dialogFormVisibleEdit=!1,sessionStorage.clear("indexedit")},editEnter:function(){console.log(this.tableData),this.dialogFormVisibleEdit=!1,sessionStorage.clear("indexedit")},edit:function(e,t){console.log(e),sessionStorage.clear("indexedit"),sessionStorage.setItem("indexedit",u()(e)),this.dialogFormVisibleEdit=!0,this.EditId=t.$index},RmovehandleClick:function(e){var t=this;console.log(e.row),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.API.seatRemoveUser({userId:e.row.userId}).then(function(e){200==e.data.status?t.$message({message:"恭喜你，删除成功",type:"success"}):1==e.data.status&&t.$message({message:"只有离职的用户可以被删",type:"warning"})}).catch(function(e){console.log("error:"+e.message)})})},isAlertList:function(e){switch(console.log(e),e){case 1:this.indexedit=["userGroupName"];break;case 2:this.indexedit=["userGroupName","groupName","legionName"];break;case 3:this.indexedit=["userGroupName","groupName","legionName","saleName"];break;case 4:case 5:this.indexedit=["userGroupName","groupName","legionName","saleName","saleGroupName"];break;case 6:this.indexedit=["userGroupName","groupName","legionName","","","spreadName"];break;case 7:this.indexedit=["userGroupName","groupName","legionName","","","","customName"];break;case 8:case 9:this.indexedit=["userGroupName","groupName","legionName","","","","customName","customGroupName"]}}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"left",attrs:{title:e.updateParams.userId?"编辑坐席":"新增坐席",visible:e.updateVisible,"close-on-click-modal":!1,width:"720px"},on:{"update:visible":function(t){e.updateVisible=t}}},[a("el-form",{ref:"updateForm",staticClass:"demo-ruleForm",attrs:{model:e.updateParams,rules:e.updateRules,inline:!0,resetField:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"部门",prop:""}},[a("el-cascader",{staticClass:"mr20",staticStyle:{width:"180px"},attrs:{options:e.departmentTree,props:e.departmentProps,"show-all-levels":!1,"change-on-select":!0,"expand-trigger":"hover"},model:{value:e.updateDeptId,callback:function(t){e.updateDeptId=t},expression:"updateDeptId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:""}},[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.updateParams.roleIdFk,callback:function(t){e.$set(e.updateParams,"roleIdFk",t)},expression:"updateParams.roleIdFk"}},e._l(e.roleOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.roleId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.updateParams.name,callback:function(t){e.$set(e.updateParams,"name",t)},expression:"updateParams.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.updateParams.mobile,callback:function(t){e.$set(e.updateParams,"mobile",t)},expression:"updateParams.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"呼叫坐席",prop:"callSeat"}},[a("el-input",{model:{value:e.updateParams.callSeat,callback:function(t){e.$set(e.updateParams,"callSeat",t)},expression:"updateParams.callSeat"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"登录账号",prop:"userName"}},[a("el-input",{model:{value:e.updateParams.userName,callback:function(t){e.$set(e.updateParams,"userName",t)},expression:"updateParams.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"transformPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.updateParams.transformPassword,callback:function(t){e.$set(e.updateParams,"transformPassword",t)},expression:"updateParams.transformPassword"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.beforeSubmit("updateForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var b={props:["selectedDept"],components:{EmployeeUpdate:a("Z0/y")(f,g,!1,function(e){a("cXQA"),a("3zJm")},"data-v-3c99c699",null).exports},data:function(){return{loading:!1,list:[],page:{},params:{deptIdFk:"",status:"",roleIdFk:"",pageIndex:1,pageSize:10},searchFieldName:"",searchField:{0:"name",1:"userId",2:"mobile"},statusOptions:[{id:1,label:"在职"},{id:0,label:"离职"},{id:3,label:"禁用"}],roleOptions:[],updateDeptId:[],updateVisible:!1,updateParams:{deptName:"",type:""},departmentTree:[],departmentProps:{label:"label",value:"id"},updateDepartment:[],updateRoleOptions:[],updateTypeLevel:{},updateRules:{deptIdFk:[{required:!0,message:"请选择部门",trigger:"change"}],roleIdFk:[{required:!0,message:"请选择用户组",trigger:"change"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择在职状态",trigger:"change"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],userName:[{required:!0,message:"请输入账号",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]}}},computed:i()({},Object(r.d)({userInfo:function(e){return e.user.userInfo},deptInfo:function(e){return e.user.deptInfo}}),{departmentNew:function(){var e=this.deptInfo,t={id:e.deptId,label:e.deptName||"未知",level:e.deptLevel,type:e.type};return this.departmentTree&&this.departmentTree.length&&(t.children=this.departmentTree),console.log(t),[t]}}),watch:{selectedDept:function(e,t){e&&e.hasPerm?(this.params={deptIdFk:e.id},this.search()):(this.params={pageIndex:1,pageSize:10},this.list=[],this.page={})},updateDeptId:function(e){e&&e.length&&(this.updateParams.deptIdFk=e[e.length-1],console.log(this.updateParams.deptIdFk))}},created:function(){var e=this;this.API.qryRole().then(function(t){e.roleOptions=t.result}),this.API.qryDept({deptId:this.userInfo.deptIdFk}).then(function(t){e.departmentTree=t.result})},methods:{search:function(){var e=this;this.API.qryUser(this.params).then(function(t){console.log(t),e.list=t.result,e.page=t.page})},getDeptRole:function(e){var t=this;e&&(this.updateParams.roleIdFk=""),this.updateParams.deptIdFk&&(this.getTypeLevel(this.departmentNew),console.log(this.updateTypeLevel),this.API.getDeptRole(this.updateTypeLevel).then(function(e){t.updateRoleOptions=e.deptRole&&e.deptRole.length?e.deptRole:[]}))},getTypeLevel:function(e){var t=this,a=this;e&&e.length&&e.forEach(function(e){console.log(e.id,t.updateParams.deptIdFk),e.id!=t.updateParams.deptIdFk?e.children&&e.children.length&&a.getTypeLevel(e.children):a.updateTypeLevel={type:e.type,level:e.level}})},beforeSearch:function(e){this.deptId?this.$message({type:"error",message:"请先选择部门"}):(this.params.pageIndex=e,this.search())},handleDelete:function(e){var t=this;this.$confirm("确定删除坐席("+e.name+")吗?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log({userId:e.userId}),t.API.delUser({userId:e.userId}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.search()})}).catch(function(){})},handleUpdate:function(e){this.updateVisible=!0,console.log(e),e?(this.updateDeptId=[e.deptIdFk],this.updateParams={deptIdFk:e.deptIdFk,roleIdFk:e.roleIdFk,userId:e.userId,name:e.name,mobile:e.mobile,callSeat:e.callSeat,userName:e.userName,status:e.status,password:e.password},console.log(this.updateParams,e),this.updateParams.transformPassword=e.password,this.getDeptRole()):this.updateParams={status:1}},beforeSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updateVisible=!1,t.updateParams.deptIdFk=t.updateDeptId[t.updateDeptId.length-1],t.handleSubmit()})},handleSubmit:function(){var e=this,t=this.updateParams.userId?"mdfUser":"addUser",a=c()({},this.updateParams);a.transformPassword=a.transformPassword?this.$trim(a.transformPassword):"",a.transformPassword="addUser"==t?a.transformPassword?h()(a.transformPassword):"":a.transformPassword==a.password?a.transformPassword:h()(a.transformPassword),this.loading||(this.loading=!0,this.API[t](a).then(function(t){e.loading=!1,e.$message({type:"success",message:"保存成功！"}),e.search()}).catch(function(t){e.loading=!1}))},_find:function(){var e=this,t={};0==this.formInline.select&&(t.name=this.formInline.default),1==this.formInline.select&&(t.ID=this.formInline.default),2==this.formInline.select&&(t.mobile=this.formInline.default),"在职"==this.findFormInline[0].default&&(t.status=1),"离职"==this.findFormInline[0].default&&(t.status=0),t.roleIdFk=this.findFormInline[1].default,this.API.tissueGetSeat(t).then(function(t){for(var a=t.result,s=0;s<a.length;s++)1==a[s].status?a[s].status="在职":a[s].status="离职";e.seatDataWatch=a}).catch(function(e){console.log("error:"+e.message)})},tabEdit:function(e,t){if("groupName"==t)this.tabEditWarp(e,t,"legionName"),this.requiredOBJ.deptIdFk=e;else if("legionName"==t)7==this.isLabel||8==this.isLabel||9==this.isLabel?(this.tabEditWarp(e,t,"customName"),this.requiredOBJ.deptIdFk=e):6==this.isLabel?(this.tabEditWarp(e,t,"spreadName"),this.requiredOBJ.deptIdFk=e):(this.tabEditWarp(e,t,"saleName"),this.requiredOBJ.deptIdFk=e);else if("saleName"==t)this.tabEditWarp(e,t,"saleGroupName"),this.requiredOBJ.deptIdFk=e;else if("saleGroupName"==t)this.requiredOBJ.deptIdFk=e;else if("customName"==t)this.tabEditWarp(e,t,"customGroupName");else if("userGroupName"==t)return this.isLabel=e,this.requiredOBJ.roleIdFk=e,void this.isAlertList(e)},tabEditWarp:function(e,t,a){var s=this;this.API.seatAddChild({deptId:e}).then(function(e){var t=e.result;s.newsFormInline[a].list=t}).catch(function(e){console.log("error:"+e.message)})},newsEnter:function(e){var t=this;for(var a in this.newsFormInline)this.requiredOBJ[a]=this.newsFormInline[a].default;this.$refs[e].validate(function(e){if(e){t.API.seatgetUserAddUser(t.requiredOBJ).then(function(e){console.log(e)}).catch(function(e){console.log("error:"+e.message)}),sessionStorage.setItem("newsFormInline",u()(t.newsFormInline));var a=JSON.parse(sessionStorage.getItem("newsFormInline"));t.tableData.push(a),sessionStorage.clear("newsFormInline"),t.dialogFormVisible=!1}})},editEase:function(){this.EditList=JSON.parse(sessionStorage.getItem("indexedit")),this.dialogFormVisibleEdit=!1,sessionStorage.clear("indexedit")},editEnter:function(){console.log(this.tableData),this.dialogFormVisibleEdit=!1,sessionStorage.clear("indexedit")},edit:function(e,t){console.log(e),sessionStorage.clear("indexedit"),sessionStorage.setItem("indexedit",u()(e)),this.dialogFormVisibleEdit=!0,this.EditId=t.$index},RmovehandleClick:function(e){var t=this;console.log(e.row),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.API.seatRemoveUser({userId:e.row.userId}).then(function(e){200==e.data.status?t.$message({message:"恭喜你，删除成功",type:"success"}):1==e.data.status&&t.$message({message:"只有离职的用户可以被删",type:"warning"})}).catch(function(e){console.log("error:"+e.message)})})},isAlertList:function(e){switch(console.log(e),e){case 1:this.indexedit=["userGroupName"];break;case 2:this.indexedit=["userGroupName","groupName","legionName"];break;case 3:this.indexedit=["userGroupName","groupName","legionName","saleName"];break;case 4:case 5:this.indexedit=["userGroupName","groupName","legionName","saleName","saleGroupName"];break;case 6:this.indexedit=["userGroupName","groupName","legionName","","","spreadName"];break;case 7:this.indexedit=["userGroupName","groupName","legionName","","","","customName"];break;case 8:case 9:this.indexedit=["userGroupName","groupName","legionName","","","","customName","customGroupName"]}}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("bread-crumb",[a("h2",[e._v("坐席管理")]),e._v(" "),e.$root.perm.ZXGL_XZZX?a("el-button",{attrs:{slot:"right",type:"primary"},on:{click:function(t){e.handleUpdate()}},slot:"right"},[e._v("新增坐席")]):e._e()],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.params,"label-width":"80px",size:"small"}},[a("label",{staticClass:"el-form-item__label boldFont",staticStyle:{"font-weight":"normal"}},[e._v("精确查找:")]),e._v(" "),a("el-input",{staticClass:"input-with-select",style:"width:240px",attrs:{clearable:!0,placeholder:"请输入内容",size:"small"},model:{value:e.params[e.searchField[e.searchFieldName]],callback:function(t){e.$set(e.params,e.searchField[e.searchFieldName],t)},expression:"params[searchField[searchFieldName]]"}},[a("el-select",{style:"width:100px",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchFieldName,callback:function(t){e.searchFieldName=t},expression:"searchFieldName"}},e._l(["姓名","ID","手机号"],function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在职"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:!0,placeholder:"请选择"},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.statusOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:!0,placeholder:"请选择"},model:{value:e.params.roleIdFk,callback:function(t){e.$set(e.params,"roleIdFk",t)},expression:"params.roleIdFk"}},e._l(e.roleOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.roleId}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:function(t){e.beforeSearch(1)}}},[e._v("查询")])],1)],1),e._v(" "),a("data-pagination",{attrs:{"page-data":e.page},on:{change:e.beforeSearch}},[a("el-table",{staticClass:"table",attrs:{slot:"table",data:e.list},slot:"table"},[a("el-table-column",{attrs:{prop:"userId",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"用户组",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"callSeat",label:"呼叫座席"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bu",label:"事业部"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptChild",label:"子部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group",label:"小组"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"在职":0==t.row.status?"离职":"禁用")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),0==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")]):a("el-button",{attrs:{type:"text",size:"small",disabled:"",title:"状态为离职的员工才可以删除"}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"left",attrs:{title:e.updateParams.userId?"编辑坐席":"新增坐席",visible:e.updateVisible,rules:e.updateRules,"close-on-click-modal":!1,width:"720px"},on:{"update:visible":function(t){e.updateVisible=t}}},[a("el-form",{ref:"updateForm",staticClass:"demo-ruleForm",attrs:{model:e.updateParams,rules:e.updateRules,inline:!0,resetField:!0,"label-width":"100px"}},[a("div",[a("el-form-item",{attrs:{label:"部门",prop:"deptIdFk"}},[a("el-cascader",{staticClass:"mr20",staticStyle:{width:"180px"},attrs:{options:e.updateParams.userId&&e.deptInfo.deptLevel<5?e.departmentNew:e.departmentTree,props:e.departmentProps,clearable:!0,"show-all-levels":!1,"change-on-select":!0,"expand-trigger":"hover"},on:{blur:function(t){e.getDeptRole(!0)}},model:{value:e.updateDeptId,callback:function(t){e.updateDeptId=t},expression:"updateDeptId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:"roleIdFk"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.updateParams.roleIdFk,callback:function(t){e.$set(e.updateParams,"roleIdFk",t)},expression:"updateParams.roleIdFk"}},e._l(e.updateRoleOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.roleId}})}))],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.updateParams.name,callback:function(t){e.$set(e.updateParams,"name",t)},expression:"updateParams.name"}})],1),e._v(" "),e.updateParams.userId?a("el-form-item",{attrs:{label:"角色状态",prop:"status"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择"},model:{value:e.updateParams.status,callback:function(t){e.$set(e.updateParams,"status",t)},expression:"updateParams.status"}},e._l(e.statusOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.id}})}))],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.updateParams.mobile,callback:function(t){e.$set(e.updateParams,"mobile",t)},expression:"updateParams.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"呼叫坐席",prop:"callSeat"}},[a("el-input",{model:{value:e.updateParams.callSeat,callback:function(t){e.$set(e.updateParams,"callSeat",t)},expression:"updateParams.callSeat"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"登录账号",prop:"userName"}},[a("el-input",{model:{value:e.updateParams.userName,callback:function(t){e.$set(e.updateParams,"userName",t)},expression:"updateParams.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"transformPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.updateParams.transformPassword,callback:function(t){e.$set(e.updateParams,"transformPassword",t)},expression:"updateParams.transformPassword"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.beforeSubmit("updateForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var I={components:{Department:o,Employee:a("Z0/y")(b,v,!1,function(e){a("dUrK"),a("x5GH")},"data-v-c152000c",null).exports},data:function(){return{selectedDept:null}},created:function(){},methods:{handleSelect:function(e){console.log(e),this.selectedDept=e}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrap clearfix"},[t("department",{on:{change:this.handleSelect}}),this._v(" "),t("employee",{attrs:{"selected-dept":this.selectedDept}})],1)},staticRenderFns:[]};var N=a("Z0/y")(I,P,!1,function(e){a("31hi")},"data-v-68ba8387",null);t.default=N.exports},cXQA:function(e,t){},dUrK:function(e,t){},x5GH:function(e,t){}});
//# sourceMappingURL=5.7f30bf28c1a4bb389ec9.js.map