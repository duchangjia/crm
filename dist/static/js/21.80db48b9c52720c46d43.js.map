{"version":3,"sources":["webpack:///src/pages/system/role-perm.vue","webpack:///./src/pages/system/role-perm.vue?9831","webpack:///./src/pages/system/role-perm.vue"],"names":["role_perm","data","roleId","this","$route","params","id","roleName","menuTree","selectedList","checkedList","created","_this","API","qryRoleMenu","then","res","console","log","roleVO","menuTreeVO","roleMenu","initChecked","methods","list","vm","length","forEach","listItem","checked","i","menuId","splice","children","getChecked","push","submit","_this2","mdfRoleMenu","join","$message","type","message","system_role_perm","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator-class","to","path","_v","_s","_l","mod","key1","menuName","directives","name","rawName","value","expression","domProps","Array","isArray","_i","on","change","$event","$$a","$$el","target","$$c","$$i","$set","concat","slice","perms","page","key2","item","key3","key","click","$router","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.80db48b9c52720c46d43.js","sourcesContent":["<template>\r\n  <div class=\"main-inner\">\r\n    <bread-crumb>\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/system/role' }\">用户组管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>{{ roleName || '-' }}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </bread-crumb>\r\n\r\n    <template v-if=\"menuTree\">\r\n      <div class=\"perm-wp\" v-for=\"(mod, key1) in menuTree\">\r\n        <div class=\"perm-hd\">\r\n          <span class=\"perm-tit\">{{ mod.menuName }}</span>\r\n\r\n          <label class=\"perm-label\">\r\n            <input class=\"perm-check\" v-model=\"mod.checked\" type=\"checkbox\"> 显示模块 {{ mod.perms }}\r\n          </label>\r\n        </div>\r\n        <ul class=\"perm-bd\">\r\n          <li v-for=\"(page, key2) in mod.children\">\r\n            <span class=\"perm-tit\">{{ page.menuName }}</span>\r\n\r\n            <div class=\"perm-list\">\r\n              <!-- <label class=\"perm-label\">\r\n                <input class=\"perm-check\" v-model=\"page.checked\" type=\"checkbox\"> 显示模块\r\n              </label> -->\r\n\r\n              <label class=\"perm-label\" v-for=\"(item, key3) in page.children\" :key=\"item.menuId\">\r\n                <input class=\"perm-check\" v-model=\"item.checked\" type=\"checkbox\"> {{ item.menuName }} {{ item.perms }}\r\n              </label>\r\n            </div>\r\n            <!-- <el-checkbox v-model=\"item.checked\" v-for=\"(item, key3) in page.children\" :key=\"item.menuId\">{{ item.menuName }}({{ item.menuId }})</el-checkbox> -->\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"mt30 tac\">\r\n        <el-button type=\"primary\" @click=\"submit\">保存</el-button>\r\n        <el-button type=\"default\" @click=\"$router.push('/system/role')\">返回</el-button>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      roleId: this.$route.params.id,\r\n      roleName: '-',\r\n      menuTree: null,\r\n      selectedList: [],  // 编辑前已勾选的权限\r\n      checkedList: [],   // 点击保存时已勾选的权限\r\n    }\r\n  },\r\n  created() {\r\n    this.API.qryRoleMenu({ roleId: this.roleId }).then(res => {\r\n      console.log(res)\r\n      this.roleName = res.roleVO && res.roleVO.roleName\r\n      this.menuTree = res.menuTreeVO\r\n      this.selectedList = res.roleMenu || []\r\n\r\n      this.initChecked(this.menuTree)\r\n    })\r\n  },\r\n  methods:{\r\n    initChecked(list) {\r\n      let vm = this\r\n      let selectedList = this.selectedList\r\n      if (list && list.length) {\r\n        list.forEach(listItem => {\r\n          listItem.checked = false\r\n\r\n          if (selectedList.length) {\r\n            for (let i = selectedList.length - 1; i >= 0; i--) {\r\n              if (listItem.menuId == selectedList[i]) {\r\n                listItem.checked = true\r\n                selectedList.splice(i, 1)\r\n                break;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (listItem.children && listItem.children.length) {\r\n            vm.initChecked(listItem.children)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    getChecked(list) {\r\n      let vm = this\r\n      if (list && list.length) {\r\n        list.forEach(listItem => {\r\n          if (listItem.checked) {\r\n            vm.checkedList.push(listItem.menuId)\r\n          }\r\n\r\n          if (listItem.children && listItem.children.length) {\r\n            vm.getChecked(listItem.children)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    submit() {\r\n      console.log(this.menuTree)\r\n      this.checkedList = []\r\n      this.getChecked(this.menuTree)\r\n      console.log(this.checkedList)\r\n\r\n      this.API.mdfRoleMenu({ roleId: this.roleId, menuId: this.checkedList.join(',')}).then(res => {\r\n        console.log(res)\r\n        this.$message({\r\n          type: 'success',\r\n          message: '保存成功！'\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .perm-wp {\r\n    padding: 15px 20px;\r\n    .perm-hd {\r\n      padding-bottom: 15px;\r\n      border-bottom: 1px solid #efefef;\r\n      font-size: 16px;\r\n      .perm-tit {\r\n        margin-right: 36px;\r\n      }\r\n    }\r\n    .perm-bd {\r\n      li {\r\n        margin: 15px 20px 0 20px;\r\n        line-height: 32px;\r\n      }\r\n    }\r\n    .perm-tit {\r\n      float: left;\r\n      margin-right: 30px;\r\n      width: 7em;\r\n    }\r\n    .perm-list {\r\n      margin-left: 128px;\r\n    }\r\n    .perm-label {\r\n      display: inline-block;\r\n      margin-right: 30px;\r\n      padding-left: 10px;\r\n      line-height: 19px;\r\n      font-size: 14px;\r\n      color: #606266;\r\n      &:last-child {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n    .perm-check {\r\n      display: inline-block;\r\n      border: 1px solid #dcdfe6;\r\n      border-radius: 2px;\r\n      box-sizing: border-box;\r\n      width: 14px;\r\n      height: 14px;\r\n      background-color: #fff;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/system/role-perm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-inner\"},[_c('bread-crumb',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/system/role' }}},[_vm._v(\"用户组管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.roleName || '-'))])],1)],1),_vm._v(\" \"),(_vm.menuTree)?[_vm._l((_vm.menuTree),function(mod,key1){return _c('div',{staticClass:\"perm-wp\"},[_c('div',{staticClass:\"perm-hd\"},[_c('span',{staticClass:\"perm-tit\"},[_vm._v(_vm._s(mod.menuName))]),_vm._v(\" \"),_c('label',{staticClass:\"perm-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(mod.checked),expression:\"mod.checked\"}],staticClass:\"perm-check\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(mod.checked)?_vm._i(mod.checked,null)>-1:(mod.checked)},on:{\"change\":function($event){var $$a=mod.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(mod, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(mod, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(mod, \"checked\", $$c)}}}}),_vm._v(\" 显示模块 \"+_vm._s(mod.perms)+\"\\n        \")])]),_vm._v(\" \"),_c('ul',{staticClass:\"perm-bd\"},_vm._l((mod.children),function(page,key2){return _c('li',[_c('span',{staticClass:\"perm-tit\"},[_vm._v(_vm._s(page.menuName))]),_vm._v(\" \"),_c('div',{staticClass:\"perm-list\"},_vm._l((page.children),function(item,key3){return _c('label',{key:item.menuId,staticClass:\"perm-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.checked),expression:\"item.checked\"}],staticClass:\"perm-check\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(item.checked)?_vm._i(item.checked,null)>-1:(item.checked)},on:{\"change\":function($event){var $$a=item.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(item, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(item, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(item, \"checked\", $$c)}}}}),_vm._v(\" \"+_vm._s(item.menuName)+\" \"+_vm._s(item.perms)+\"\\n            \")])}))])}))])}),_vm._v(\" \"),_c('div',{staticClass:\"mt30 tac\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){_vm.$router.push('/system/role')}}},[_vm._v(\"返回\")])],1)]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-52ff418c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/system/role-perm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52ff418c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./role-perm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role-perm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role-perm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52ff418c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./role-perm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-52ff418c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/system/role-perm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}