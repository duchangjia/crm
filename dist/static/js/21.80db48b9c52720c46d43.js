webpackJsonp([21],{"8YtU":function(e,t,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{roleId:this.$route.params.id,roleName:"-",menuTree:null,selectedList:[],checkedList:[]}},created:function(){var e=this;this.API.qryRoleMenu({roleId:this.roleId}).then(function(t){console.log(t),e.roleName=t.roleVO&&t.roleVO.roleName,e.menuTree=t.menuTreeVO,e.selectedList=t.roleMenu||[],e.initChecked(e.menuTree)})},methods:{initChecked:function(e){var t=this,c=this.selectedList;e&&e.length&&e.forEach(function(e){if(e.checked=!1,c.length)for(var s=c.length-1;s>=0;s--)if(e.menuId==c[s]){e.checked=!0,c.splice(s,1);break}e.children&&e.children.length&&t.initChecked(e.children)})},getChecked:function(e){var t=this;e&&e.length&&e.forEach(function(e){e.checked&&t.checkedList.push(e.menuId),e.children&&e.children.length&&t.getChecked(e.children)})},submit:function(){var e=this;console.log(this.menuTree),this.checkedList=[],this.getChecked(this.menuTree),console.log(this.checkedList),this.API.mdfRoleMenu({roleId:this.roleId,menuId:this.checkedList.join(",")}).then(function(t){console.log(t),e.$message({type:"success",message:"保存成功！"})})}}},r={render:function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"main-inner"},[c("bread-crumb",[c("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[c("el-breadcrumb-item",{attrs:{to:{path:"/system/role"}}},[e._v("用户组管理")]),e._v(" "),c("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),c("el-breadcrumb-item",[e._v(e._s(e.roleName||"-"))])],1)],1),e._v(" "),e.menuTree?[e._l(e.menuTree,function(t,s){return c("div",{staticClass:"perm-wp"},[c("div",{staticClass:"perm-hd"},[c("span",{staticClass:"perm-tit"},[e._v(e._s(t.menuName))]),e._v(" "),c("label",{staticClass:"perm-label"},[c("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"mod.checked"}],staticClass:"perm-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(c){var s=t.checked,r=c.target,n=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&e.$set(t,"checked",s.concat([null])):i>-1&&e.$set(t,"checked",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"checked",n)}}}),e._v(" 显示模块 "+e._s(t.perms)+"\n        ")])]),e._v(" "),c("ul",{staticClass:"perm-bd"},e._l(t.children,function(t,s){return c("li",[c("span",{staticClass:"perm-tit"},[e._v(e._s(t.menuName))]),e._v(" "),c("div",{staticClass:"perm-list"},e._l(t.children,function(t,s){return c("label",{key:t.menuId,staticClass:"perm-label"},[c("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],staticClass:"perm-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:function(c){var s=t.checked,r=c.target,n=!!r.checked;if(Array.isArray(s)){var i=e._i(s,null);r.checked?i<0&&e.$set(t,"checked",s.concat([null])):i>-1&&e.$set(t,"checked",s.slice(0,i).concat(s.slice(i+1)))}else e.$set(t,"checked",n)}}}),e._v(" "+e._s(t.menuName)+" "+e._s(t.perms)+"\n            ")])}))])}))])}),e._v(" "),c("div",{staticClass:"mt30 tac"},[c("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),c("el-button",{attrs:{type:"default"},on:{click:function(t){e.$router.push("/system/role")}}},[e._v("返回")])],1)]:e._e()],2)},staticRenderFns:[]};var n=c("Z0/y")(s,r,!1,function(e){c("ZERB")},"data-v-52ff418c",null);t.default=n.exports},ZERB:function(e,t){}});
//# sourceMappingURL=21.80db48b9c52720c46d43.js.map