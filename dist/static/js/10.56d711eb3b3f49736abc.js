webpackJsonp([10],{"0Fpl":function(e,t){},"0yGy":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUZBMDYwN0IzNDkyMTFFODlFMDNDOUY3RDlDRTEwQzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUZBMDYwN0MzNDkyMTFFODlFMDNDOUY3RDlDRTEwQzUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QUM1QzEyNDM0OTAxMUU4OUUwM0M5RjdEOUNFMTBDNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRkEwNjA3QTM0OTIxMUU4OUUwM0M5RjdEOUNFMTBDNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgHHMAUAAAJaSURBVHjazFdBT1NBEJ63ba2VFAmVFORgUjD+AQ+GC//Bk9G7ZwI3btwh3AknUq8Qf4JEPfEHDMHEhECNpWJN+trQFr5Z5hls9r3Oe7SUSb68ze7bmdmZ2dkZj7YuSUkGeAzkgUdAFkjJWgdoAQ3gL/AH6GqYegoFWNA0MClKaIiF14CKKJZIARY2AxTtf8mImf8ETsMsko44dUlMfRvyxHrjwHeXNVwmZaEvBiBcxdM4Tv4cyNDgKSO8s2EK8Hguwi0uBz6woBg7rmUYlwIccDk1qzzN0xTtAGU71lNOZP2nQFaiXRNWHoS+hdAdjOaBkh3znKe+LcXAFcE1fAY8UeheQCpag9qv5JJVRKWi3P6vSEFr5NOZQokq8MNINptUnXyCNkX4b2rSMmamrfAmrWDuHGsL9h8dscyUkTtqFCnlEifbxCm/QPwb5Ln9f2s1+mTn2AINWo+R2sfZBTrzu+gpHdjvCb1MeDWrpm/kz9BHi7hUpFWLPlFlehODw/ezFnEpRa8t+jx05saTOgpKGRoxGSkmRkWdtDyR6UTbu/Q58d5ravFmHxhLtL1CS7e0gM8uqI/QBfVAgW5EBqxK4lxUsw3+DfaG1431tARhLTQbdmgXXn5PD2kDmS9miNFexGotCEKS6rXgLD5/0TZUa0KJd1gtKEvRM2rTB5y/HFGsVnqr4lkpIO+CuFI+7q2ITuVGDJt8+3w5SjIOiiOgPUThbZHRDauKOSkdAhdDEH4hvFv9+gLu774N2B2+8Gzcu9bsXjenLotMSHueC2nPfWnPz7Xt+ZUAAwBX5pZeq6aUlQAAAABJRU5ErkJggg=="},DHx4:function(e,t){},XGIW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("a3Yh"),o=a.n(l),r=a("aA9S"),s=a.n(r),n=a("4YfN"),i=a.n(n),c=a("9rMa"),p=a("aw90"),d={data:function(){var e=this,t=function(t,a,l){var o=e.formData,r=o.mobile,s=o.phone,n=o.weiXin,i=o.qq;r||s||n||i?(e.error=!1,l()):(e.error=!0,l())};return{visible:this.show,error:!1,formData:{nick:"",intentSubject:"",mobile:"",phone:"",weiXin:"",qq:"",department:[],followUserIdFk:"",chanceLocation:[],degree:"",name:"",cardNo:"",cardType:"1",studentLocation:[],class_time:""},rules:{cardNo:[{pattern:"^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[Xx])$)$",message:"请填写正确身份证号码",trigger:"blur"}],mobile:[{pattern:"^1[23456789]\\d{9}$",message:"请填写正确手机号码",trigger:"blur"},{validator:t,trigger:"blur"}],weiXin:[{pattern:"^[a-zA-Z\\d_]{5,}$",message:"请填写正确微信号码",trigger:"blur"},{validator:t,trigger:"blur"}],qq:[{pattern:"^\\d{5,10}$",message:"请填写正确qq号码",trigger:"blur"},{validator:t,trigger:"blur"}],phone:[{pattern:"^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$",message:"请填写正确座机号码",trigger:"blur"},{validator:t,trigger:"blur"}],nick:[{required:!0,message:"请填写学员昵称"}],intentSubject:[{required:!0,message:"请选择意向项目"}],followUserIdFk:[{required:!0,message:"请选择咨询师",trigger:"change"}]},followUserOptions:[],schoolTimeOptions:[{value:"1",label:"晚上"},{value:"2",label:"周末"},{value:"3",label:"业余时间"}],showMore:!1,areaProps:{value:"id",label:"city",children:"cities"},counselorProps:{value:"id",label:"label",children:"children"}}},props:{showFooter:{type:Boolean,default:!0},show:{type:Boolean,default:!1},projectoptions:{default:""},counselorOptions:{type:Array,default:function(){return[]}},chanceArea:{type:Array,default:function(){return[]}}},methods:{counselorChange:function(e){var t=this;this.followUserOptions=[],this.formData.followUserIdFk="";var a=e[e.length-1];a&&this.API.qryDeptUser({deptId:a}).then(function(e){t.followUserOptions=e.result})},handleItemChange:function(e){if(!(e.length>1)&&e.length){var t=this.chanceArea;this.API.qryArea({areaId:e[0]}).then(function(a){t.forEach(function(t){if(t.id==e[0])return a.result[0].city?t.cities=a.result:t.cities="",!1})})}},save:function(){var e=this,t=this.formData,a=t.chanceLocation,l=t.studentLocation,o=s()({},this.formData,{intentProvinceIdFk:a.length>0?a[0]:"",intentCityIdFk:a.length>1?a[1]:"",provinceIdFk:l.length>0?l[0]:"",cityIdFk:l.length>1?l[1]:""});this.$refs.addform.validate(function(t){t&&e.API.addStuChance(o).then(function(){e.$message({type:"success",message:"操作成功!"}),e.$emit("update:show",!1),e.$emit("close")})})}},watch:{show:function(){this.visible=this.show,this.show&&(this.formData.department=[],this.$refs.addform&&this.$refs.addform.resetFields())}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{center:"",visible:e.visible,width:"900px",show:e.show},on:{"update:visible":function(t){e.visible=t},close:function(t){e.$emit("update:show",!1)}}},[a("span",{staticClass:"title-header left",attrs:{slot:"title"},slot:"title"},[e._v("新增学员")]),e._v(" "),a("el-form",{ref:"addform",attrs:{model:e.formData,"label-suffix":"：","label-width":"110px",rules:e.rules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学员昵称",prop:"nick"}},[a("el-input",{attrs:{placeholder:"学员昵称",clearable:""},model:{value:e.formData.nick,callback:function(t){e.$set(e.formData,"nick",t)},expression:"formData.nick"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"意向项目",prop:"intentSubject"}},[a("el-select",{staticClass:"full-width",attrs:{clearable:"",placeholder:"请选择意向项目"},model:{value:e.formData.intentSubject,callback:function(t){e.$set(e.formData,"intentSubject",t)},expression:"formData.intentSubject"}},e._l(e.projectoptions,function(t,l){return e.projectoptions?a("el-option",{key:l,attrs:{label:t.proName,value:t.proId}}):e._e()}))],1)],1)],1),e._v(" "),a("h3",{staticClass:"contactType margin-bottom-20"},[e._v("\n      联系方式"),a("span",{staticClass:"margin-left-10",class:{red:e.error}},[e._v("以下四种联系方式至少填写一种")])]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"手机",clearable:""},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"微信",prop:"weiXin"}},[a("el-input",{attrs:{placeholder:"微信"},model:{value:e.formData.weiXin,callback:function(t){e.$set(e.formData,"weiXin",t)},expression:"formData.weiXin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"座机",prop:"phone"}},[a("el-input",{attrs:{placeholder:"座机",clearable:""},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"qq",prop:"qq"}},[a("el-input",{attrs:{placeholder:"qq",clearable:""},model:{value:e.formData.qq,callback:function(t){e.$set(e.formData,"qq",t)},expression:"formData.qq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属咨询师",prop:"followUserIdFk"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-cascader",{staticClass:"full-width",attrs:{options:e.counselorOptions,placeholder:"请选择部门",props:e.counselorProps,clearable:"","show-all-levels":!1,"expand-trigger":"hover"},on:{change:e.counselorChange},model:{value:e.formData.department,callback:function(t){e.$set(e.formData,"department",t)},expression:"formData.department"}})],1),e._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:2}},[e._v("\n              -\n            ")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-select",{staticClass:"full-width",attrs:{clearable:"",placeholder:"请选择咨询师"},model:{value:e.formData.followUserIdFk,callback:function(t){e.$set(e.formData,"followUserIdFk",t)},expression:"formData.followUserIdFk"}},e._l(e.followUserOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.userId}})}))],1)],1)],1)],1)],1),e._v(" "),a("section",{staticClass:"more-container border-top"},[a("h3",{staticClass:"moreTile",on:{click:function(t){e.showMore=!e.showMore}}},[e._v("\n        填写更多信息"),a("i",{staticClass:"el-icon-arrow-up",class:{down:e.showMore}})]),e._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"showMore"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"机会地域",prop:"chanceLocation"}},[a("el-cascader",{staticClass:"full-width",attrs:{options:e.chanceArea,clearable:"",props:e.areaProps,"change-on-select":!0},on:{change:e.handleItemChange},model:{value:e.formData.chanceLocation,callback:function(t){e.$set(e.formData,"chanceLocation",t)},expression:"formData.chanceLocation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"意向程度",prop:"degree"}},[a("el-radio-group",{model:{value:e.formData.degree,callback:function(t){e.$set(e.formData,"degree",t)},expression:"formData.degree"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("未知")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("强")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("中")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("弱")]),e._v(" "),a("el-radio-button",{attrs:{label:"4"}},[e._v("无")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学员姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"学员姓名",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"cardNo"}},[a("el-input",{attrs:{placeholder:"身份证号",clearable:""},model:{value:e.formData.cardNo,callback:function(t){e.$set(e.formData,"cardNo",t)},expression:"formData.cardNo"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.formData.cardType,callback:function(t){e.$set(e.formData,"cardType",t)},expression:"formData.cardType"}},[a("el-option",{attrs:{label:"中国大陆",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"港澳台",value:"2"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学员地域",prop:"studentLocation"}},[a("el-cascader",{staticClass:"full-width",attrs:{options:e.chanceArea,clearable:"",props:e.areaProps,"change-on-select":!0},on:{change:e.handleItemChange},model:{value:e.formData.studentLocation,callback:function(t){e.$set(e.formData,"studentLocation",t)},expression:"formData.studentLocation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划上课时间",prop:"class_time"}},[a("el-select",{staticClass:"full-width",attrs:{clearable:"",placeholder:"计划上课时间"},model:{value:e.formData.class_time,callback:function(t){e.$set(e.formData,"class_time",t)},expression:"formData.class_time"}},e._l(e.schoolTimeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.$emit("update:show",!1)}}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var m=a("Z0/y")(d,u,!1,function(e){a("0Fpl")},"data-v-932c5192",null).exports,h=a("3cXf"),f=a.n(h),v={name:"chance-belong",data:function(){return{visible:this.show,formOption:{followUserIdFk:"",department:[]},followUserOptions:[],counselorProps:{value:"id",label:"label",children:"children"},rules:{followUserIdFk:[{required:!0,message:"请选择咨询师"}]}}},props:{show:{type:Boolean,default:!1},consulors:{type:[Array]},stuIds:{type:[Number,String]},counselorOptions:{type:Array,default:function(){return[]}}},methods:{counselorChange:function(e){var t=this;this.followUserOptions=[],this.formOption.followUserIdFk="";var a=e[e.length-1];a&&this.API.qryDeptUser({deptId:a}).then(function(e){t.followUserOptions=e.result})},save:function(){var e=this;this.$refs.changeForm.validate(function(t){if(t){var a=e.consulors,l=e.formOption.followUserIdFk;if(a.indexOf(l)>-1)return void e.$message({type:"warning",message:"不能选择学员当前所属咨询师!"});var o={stuIds:e.stuIds,userId:e.formOption.followUserIdFk};e.API.mdfStuChanceBelong({belongToInfo:f()(o)}).then(function(){e.$message({type:"success",message:"操作成功!"}),e.$emit("update:show",!1),e.$emit("close")})}})}},watch:{show:function(){this.visible=this.show,this.show&&(this.formOption.department=[],this.formOption.followUserIdFk="",this.$refs.changeForm&&this.$refs.changeForm.clearValidate())}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{center:"",visible:e.visible,width:"500px",show:e.show},on:{"update:visible":function(t){e.visible=t},close:function(t){e.$emit("update:show",!1)}}},[a("span",{staticClass:"title-header left",attrs:{slot:"title"},slot:"title"},[e._v("学员转归属")]),e._v(" "),a("el-form",{ref:"changeForm",attrs:{model:e.formOption,"label-suffix":"：","label-width":"110px",rules:e.rules}},[a("el-form-item",{attrs:{label:"所属咨询师",prop:"followUserIdFk"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-cascader",{staticClass:"full-width",attrs:{options:e.counselorOptions,placeholder:"请选择部门",props:e.counselorProps,clearable:"","show-all-levels":!1,"expand-trigger":"hover"},on:{change:e.counselorChange},model:{value:e.formOption.department,callback:function(t){e.$set(e.formOption,"department",t)},expression:"formOption.department"}})],1),e._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:2}},[e._v("\n          -\n        ")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-select",{staticClass:"full-width",attrs:{clearable:"",placeholder:"请选择咨询师"},model:{value:e.formOption.followUserIdFk,callback:function(t){e.$set(e.formOption,"followUserIdFk",t)},expression:"formOption.followUserIdFk"}},e._l(e.followUserOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.userId}})}))],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.$emit("update:show",!1)}}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var w=a("Z0/y")(v,b,!1,function(e){a("b4zl")},"data-v-357eaed5",null).exports,g={name:"chanceManage",components:{ElTablePagination:p.a,addStudent:m,chanceBelong:w},data:function(){return{formWord:{keyword:"",type:"0"},showSearchForm:!1,consulorType:"nameFk",formOptions:{intentSubject:"",chanceArea:[],createStuTime:"",status:"",entryType:"",validMinFollowCount:void 0,validMaxFollowCount:void 0,allocTime:"",departmentIds:[],lastValidFollowTime:"",consulor:""},projectoptions:[],chanceOptions:[{value:"0",label:"待分配"},{value:"1",label:"已分配"},{value:"2",label:"已退回"},{value:"3",label:"已预约"},{value:"4",label:"已成交"},{value:"5",label:"已回收"}],deptOptions:[],enteringOptions:[{value:"0",label:"外部导入"},{value:"1",label:"手动录入"}],areaoptions:[],columns:[{prop:"stuId",label:"机会ID"},{prop:"nick",label:"学员昵称"},{prop:"contact",label:"联系方式"},{prop:"projectName",label:"意向项目"},{prop:"provinceName",label:"机会地域",render:function(e){var t=e.provinceName,a=e.cityName;return(t||"")+(a?"-"+a:"")}},{prop:"deptName",label:"事业部"},{prop:"status",label:"机会状态",render:function(e){switch(e.status){case 0:return"待分配";case 1:return"已分配";case 2:return"已退回";case 3:return"已预约";case 4:return"已成交";default:return"已回收"}}},{prop:"nameFk",label:"所属咨询师",render:function(e){var t=e.userNameFk,a=e.nameFk;return(t||"")+(a?"("+a+")":"")}},{prop:"lastAllocTime",label:"分配时间"},{prop:"createTime",label:"创建时间"}],showBelong:!1,showAddStudent:!1,url:"api/stuChance/qryStuChance",counselorOptions:[],areaProps:{value:"id",label:"city",children:"cities"},departmentProps:{label:"label",value:"id",children:"children"},selectionRows:[],stuIds:"",consulors:[]}},computed:i()({},Object(c.d)({userInfo:function(e){return e.user.userInfo}})),created:function(){var e=this;this.API.qryAllProject({status:1}).then(function(t){e.projectoptions=t.list}),this.API.qryArea({areaId:1}).then(function(t){var a=t.result.map(function(e){return{id:e.id,city:e.province,cities:[]}});e.areaoptions=a}),this.API.qryDept({deptId:this.userInfo.deptIdFk}).then(function(t){e.deptOptions=t.result}),this.API.qryDeptByRole().then(function(t){e.counselorOptions=t.result})},methods:{handleItemChange:function(e){if(!(e.length>1)&&e.length){var t=this.areaoptions;this.API.qryArea({areaId:e[0]}).then(function(a){t.forEach(function(t){if(t.id==e[0])return a.result[0].city?t.cities=a.result:t.cities="",!1})})}},changeGroup:function(e){if(0!==this.selectionRows.length){var t=this.selectionRows,a=this.ids;a=t.map(function(e){return e.stuId}),this.stuIds=a.join(","),this.showBelong=!0}else this.$message({message:"请至少勾选一项",type:"warning"})},selectChange:function(e){this.selectionRows=e},exactSearch:function(){this.url="api/stuChance/getAccurate";var e=this.formWord,t=e.type,a=e.keyword;this.$nextTick(function(){this.searchHandle({type:t,contact:a}),this.url="api/stuChance/qryStuChance"})},getParams:function(){var e=this.formOptions,t=e.departmentIds,a=e.chanceArea,l=e.createStuTime,r=e.lastValidFollowTime,n=e.allocTime,i=e.consulor,c=this.consulorType;return s()({},this.formOptions,o()({intentProvinceIdFk:a.length>0?a[0]:"",intentCityIdFk:a.length>1?a[1]:"",deptId:t&&t.length>0?t[t.length-1]:"",startCreateTime:l&&l.length>0?l[0]:"",endCreateTime:l&&l.length>1?l[1]:"",alloStartTime:n&&n.length>0?n[0]:"",alloEndTime:n&&n.length>1?n[1]:"",followStartTime:r&&r.length>0?r[0]:"",followEndTime:r&&r.length>1?r[1]:""},c,i))},search:function(){this.url="api/stuChance/qryStuChance";var e=this.getParams();delete e.lastValidFollowTime,this.$nextTick(function(){this.searchHandle(e)})},searchHandle:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.searchHandler(arguments[0])},reset:function(){this.formOptions.validMinFollowCount=void 0,this.formOptions.validMaxFollowCount=void 0,this.$refs.searchForm.resetFields()},changeBelong:function(e){this.consulors=[e.followUserIdFk],this.stuIds=e.stuId,this.showBelong=!0}}},y={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"main-inner"},[l("bread-crumb",[l("h2",[e._v("机会管理")])]),e._v(" "),l("section",{staticClass:"margin-bottom-20 clear"},[l("div",{staticClass:"el-col-6 clear margin-right-20",staticStyle:{"min-width":"400px"}},[l("label",{staticClass:"el-form-item__label boldFont",staticStyle:{width:"120px"}},[e._v("精确查找：")]),e._v(" "),l("el-input",{staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"请输入内容"},model:{value:e.formWord.keyword,callback:function(t){e.$set(e.formWord,"keyword",t)},expression:"formWord.keyword"}},[l("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.formWord.type,callback:function(t){e.$set(e.formWord,"type",t)},expression:"formWord.type"}},[l("el-option",{attrs:{label:"手机",value:"0"}}),e._v(" "),l("el-option",{attrs:{label:"座机",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"微信",value:"2"}}),e._v(" "),l("el-option",{attrs:{label:"QQ",value:"3"}}),e._v(" "),l("el-option",{attrs:{label:"昵称",value:"5"}}),e._v(" "),l("el-option",{attrs:{label:"ID",value:"4"}})],1)],1)],1),e._v(" "),l("el-button",{attrs:{type:"success"},on:{click:e.exactSearch}},[e._v("查找")]),e._v(" "),l("span",{staticClass:"expandBtn margin-left-20",on:{click:function(t){e.showSearchForm=!e.showSearchForm}}},[e._v(e._s(e.showSearchForm?"收起筛选":"展开筛选")+"\n      "),l("i",{staticClass:"el-icon-arrow-up",class:{down:e.showSearchForm}})]),e._v(" "),l("div",{staticClass:"right"},[e.$root.perm.JHGL_XJXY?l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAddStudent=!0}}},[e._v("新建学员")]):e._e(),e._v(" "),e.$root.perm.JHGL_ZGS?l("el-button",{attrs:{type:"primary"},on:{click:e.changeGroup}},[e._v("批量转归属")]):e._e()],1)],1),e._v(" "),l("transition",{attrs:{name:"el-fade-in"}},[l("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearchForm,expression:"showSearchForm"}],ref:"searchForm",staticClass:"search-from",attrs:{model:e.formOptions,"label-width":"120px","label-suffix":"："}},[l("el-row",[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"项目",prop:"intentSubject"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.formOptions.intentSubject,callback:function(t){e.$set(e.formOptions,"intentSubject",t)},expression:"formOptions.intentSubject"}},e._l(e.projectoptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.proName,value:e.proId}})}))],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"机会地域",prop:"chanceArea"}},[l("el-cascader",{staticClass:"full-width",staticStyle:{width:"100%"},attrs:{options:e.areaoptions,clearable:"",clearable:"",props:e.areaProps,"change-on-select":!0},on:{change:e.handleItemChange},model:{value:e.formOptions.chanceArea,callback:function(t){e.$set(e.formOptions,"chanceArea",t)},expression:"formOptions.chanceArea"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"创建时间",prop:"createStuTime"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.formOptions.createStuTime,callback:function(t){e.$set(e.formOptions,"createStuTime",t)},expression:"formOptions.createStuTime"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"机会状态",prop:"status"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.formOptions.status,callback:function(t){e.$set(e.formOptions,"status",t)},expression:"formOptions.status"}},e._l(e.chanceOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"录入类型",prop:"entryType"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.formOptions.entryType,callback:function(t){e.$set(e.formOptions,"entryType",t)},expression:"formOptions.entryType"}},e._l(e.enteringOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"有效跟进次数"}},[l("el-row",[l("el-col",{attrs:{span:11}},[l("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.formOptions.validMinFollowCount,callback:function(t){e.$set(e.formOptions,"validMinFollowCount",t)},expression:"formOptions.validMinFollowCount "}})],1),e._v(" "),l("el-col",{staticClass:"text-center",attrs:{span:2}},[e._v("\n                -\n              ")]),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-input-number",{staticStyle:{width:"100%"},attrs:{controls:!1},model:{value:e.formOptions.validMaxFollowCount,callback:function(t){e.$set(e.formOptions,"validMaxFollowCount",t)},expression:"formOptions.validMaxFollowCount"}})],1)],1)],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"分配时间",prop:"allocTime"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.formOptions.allocTime,callback:function(t){e.$set(e.formOptions,"allocTime",t)},expression:"formOptions.allocTime"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"组织架构",prop:"departmentIds"}},[l("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",options:e.deptOptions,"change-on-select":!0,props:e.departmentProps,placeholder:"组织架构","show-all-levels":!1},model:{value:e.formOptions.departmentIds,callback:function(t){e.$set(e.formOptions,"departmentIds",t)},expression:"formOptions.departmentIds"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"最后跟进时间",prop:"lastValidFollowTime"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{"start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.formOptions.lastValidFollowTime,callback:function(t){e.$set(e.formOptions,"lastValidFollowTime",t)},expression:"formOptions.lastValidFollowTime"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"所属咨询师",prop:"nameFk"}},[l("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.formOptions.consulor,callback:function(t){e.$set(e.formOptions,"consulor",t)},expression:"formOptions.consulor"}},[l("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.consulorType,callback:function(t){e.consulorType=t},expression:"consulorType"}},[l("el-option",{attrs:{label:"咨询师姓名",value:"nameFk"}}),e._v(" "),l("el-option",{attrs:{label:"咨询师账号",value:"userNameFk"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"btn-group inline-block right"},[l("el-button",{attrs:{type:"success"},on:{click:e.search}},[e._v("\n            查询\n          ")]),e._v(" "),l("el-button",{attrs:{type:"success",plain:""},on:{click:e.reset}},[e._v("\n            清空\n          ")])],1)],1)],1)],1),e._v(" "),l("el-table-pagination",{ref:"table",attrs:{columns:e.columns,url:e.url,totalField:"page.totalItem",listField:"result"},on:{"selection-change":e.selectChange}},[l("el-table-column",{attrs:{slot:"prepend",type:"selection",width:"55"},slot:"prepend"}),e._v(" "),l("el-table-column",{attrs:{slot:"append",label:"操作",align:"center"},slot:"append",scopedSlots:e._u([{key:"default",fn:function(t){return[e.$root.perm.JHGL_ZGS?l("span",{on:{click:function(a){e.changeBelong(t.row)}}},[l("img",{staticClass:"ver-middle inline-block",attrs:{src:a("0yGy"),width:"24",height:"24"}}),e._v(" "),l("el-button",{staticClass:"actionBtn ver-middle",attrs:{type:"text"}},[e._v("转归属")])],1):e._e()]}}])})],1),e._v(" "),l("add-student",{attrs:{show:e.showAddStudent,projectoptions:e.projectoptions,chanceArea:e.areaoptions,counselorOptions:e.counselorOptions},on:{"update:show":function(t){e.showAddStudent=t},close:e.searchHandle}}),e._v(" "),l("chance-belong",{attrs:{show:e.showBelong,stuIds:e.stuIds,counselorOptions:e.counselorOptions,consulors:e.consulors},on:{"update:show":function(t){e.showBelong=t},close:e.searchHandle}})],1)},staticRenderFns:[]};var k=a("Z0/y")(g,y,!1,function(e){a("DHx4")},"data-v-50d1d0fd",null);t.default=k.exports},b4zl:function(e,t){}});
//# sourceMappingURL=10.56d711eb3b3f49736abc.js.map