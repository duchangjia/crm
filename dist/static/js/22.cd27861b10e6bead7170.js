webpackJsonp([22],{UMjq:function(s,e){},cIuR:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aA9S"),o=t.n(a),r=t("4YfN"),i=t.n(r),l=t("9rMa"),n=t("KPSb"),m=t.n(n),c={name:"mdf-password",data:function(){var s=this;return{visible:this.show,formOption:{oldPassWord:"",transformPassword:"",checkPass:""},rules:{transformPassword:[{required:!0,message:"请输入新密码"},{validator:function(e,t,a){""===t?a(new Error("请输入密码")):(""!==s.formOption.checkPass&&s.$refs.changeForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{validator:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!==s.formOption.transformPassword?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],oldPassWord:[{required:!0,message:"请输入旧密码"}]}}},watch:{show:function(){this.show&&this.$refs.changeForm&&this.$refs.changeForm.resetFields(),this.visible=this.show},showPass:function(){if(!this.showPass){var s="tzedu"+this.userData.mobile.substr(-4);this.formOption.oldPassWord=s}}},props:{show:{type:Boolean,default:!1},showPass:{default:!0}},computed:i()({},Object(l.d)({userData:function(s){return s.user.userInfo}})),methods:{save:function(){var s=this;this.$refs.changeForm.validate(function(e){if(e){var t=s.formOption,a=t.oldPassWord,r=t.transformPassword;delete s.userData.createTime,delete s.userData.password;var i=o()({},s.userData,{oldPassWord:m()(a),transformPassword:m()(r)});s.API.mdfUser(i).then(function(){s.$message({type:"success",message:"操作成功!"}),s.$emit("update:show",!1)})}})}}},f={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("el-dialog",{attrs:{center:"",visible:s.visible,width:"500px",show:s.show},on:{"update:visible":function(e){s.visible=e},close:function(e){s.$emit("update:show",!1)}}},[t("span",{staticClass:"title-header left",attrs:{slot:"title"},slot:"title"},[s._v("修改密码")]),s._v(" "),t("el-form",{ref:"changeForm",attrs:{model:s.formOption,"label-suffix":"：","label-width":"110px",rules:s.rules}},[t("el-form-item",{attrs:{label:"原密码",prop:"oldPassWord"}},[t("el-input",{attrs:{type:s.showPass?"password":"text"},model:{value:s.formOption.oldPassWord,callback:function(e){s.$set(s.formOption,"oldPassWord",e)},expression:"formOption.oldPassWord"}})],1),s._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"transformPassword"}},[t("el-input",{attrs:{type:"password"},model:{value:s.formOption.transformPassword,callback:function(e){s.$set(s.formOption,"transformPassword",e)},expression:"formOption.transformPassword"}})],1),s._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password"},model:{value:s.formOption.checkPass,callback:function(e){s.$set(s.formOption,"checkPass",e)},expression:"formOption.checkPass"}})],1)],1),s._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:s.save}},[s._v("保存")]),s._v(" "),t("el-button",{on:{click:function(e){s.$emit("update:show",!1)}}},[s._v("返回")])],1)],1)},staticRenderFns:[]},d=t("Z0/y")(c,f,!1,null,null,null).exports,u={components:{mdfPassword:d},name:"personal",data:function(){return{showEdit:!1,showMdf:!1,showPass:"",form:{name:"",sex:0,roleName:"",mobile:"",userName:"",password:"",callSeat:""},rules:{mobile:[{required:!0,message:"请填写电话"},{pattern:"^1[23456789]\\d{9}$",message:"请填写正确手机号码",trigger:"blur"}],sex:[{required:!0,message:"请选择性别"}],password:[{required:!0,message:"请填写密码"}]}}},compoments:{mdfPassword:d},computed:i()({},Object(l.d)({userData:function(s){return s.user.userInfo},deptInfo:function(s){return s.user.deptInfo}})),mounted:function(){this.form=this.userData;var s="tzedu"+this.userData.mobile.substr(-4);m()(s)==this.userData.password?this.showPass=!1:this.showPass=!0},methods:{save:function(){var s=this;this.$refs.personForm.validate(function(e){if(e){var t=s.form,a=t.password,r=t.sex,i=t.mobile;delete s.userData.createTime;var l=o()({},s.userData,{transformPassword:a,sex:r,mobile:i});s.API.mdfUser(l).then(function(){s.$message({type:"success",message:"操作成功!"}),s.showEdit=!1})}})}}},p={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"white-bg personal-container"},[t("h3",{staticClass:"name-title"},[t("span",{staticClass:"name margin-right-10"},[s._v(s._s(s.userData.userName))]),s._v("———"),t("span",{staticClass:"role margin-left-10"},[s._v(s._s(s.userData.roleName))])]),s._v(" "),t("el-form",{ref:"personForm",attrs:{"label-width":"120px","label-suffix":"：",model:s.form,rules:s.rules}},[t("section",{staticClass:"basic-info border-bottom"},[t("h3",[t("span",{staticClass:"title-header"},[s._v("基本信息")]),s._v(" "),t("el-button",{staticClass:"margin-left-10",attrs:{type:"text"},on:{click:function(e){s.showEdit=!s.showEdit}}},[s._v(s._s(s.showEdit?"取消":"编辑"))])],1),s._v(" "),t("div",{staticClass:"detail-info margin-top-20 margin-left-20"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名"}},[t("span",{staticClass:"font"},[s._v(s._s(s.form.name))])])],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别",prop:"sex",required:""}},[t("span",{directives:[{name:"show",rawName:"v-show",value:!s.showEdit,expression:"!showEdit"}],staticClass:"font"},[s._v(s._s(s.form.sex?"男":"女"))]),s._v(" "),t("el-select",{directives:[{name:"show",rawName:"v-show",value:s.showEdit,expression:"showEdit"}],attrs:{placeholder:"请选择性别",clearable:"",required:""},model:{value:s.form.sex,callback:function(e){s.$set(s.form,"sex",e)},expression:"form.sex"}},[t("el-option",{attrs:{label:"女",value:0}}),s._v(" "),t("el-option",{attrs:{label:"男",value:1}})],1)],1)],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所属部门"}},[t("span",{staticClass:"font"},[s._v(s._s(s.deptInfo.deptName))])])],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"职位"}},[t("span",{staticClass:"font"},[s._v(s._s(s.form.roleName))])])],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系方式",required:"",prop:"mobile"}},[t("el-input",{directives:[{name:"show",rawName:"v-show",value:s.showEdit,expression:"showEdit"}],model:{value:s.form.mobile,callback:function(e){s.$set(s.form,"mobile",e)},expression:"form.mobile"}}),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!s.showEdit,expression:"!showEdit"}],staticClass:"font"},[s._v(s._s(s.form.mobile))])],1)],1)],1)],1)]),s._v(" "),t("section",{staticClass:"basic-info"},[t("h3",{staticClass:"title-header"},[s._v("账号信息")]),s._v(" "),t("div",{staticClass:"detail-info margin-top-20 margin-left-20"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"我的账号"}},[t("span",{staticClass:"font"},[s._v(s._s(s.form.userName))])])],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",required:"",prop:"password"}},[t("span",{staticClass:"font"},[s._v("******")]),s._v(" "),t("el-button",{staticClass:"margin-left-10",attrs:{type:"text"},on:{click:function(e){s.showMdf=!s.showMdf}}},[s._v("编辑")])],1)],1),s._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"呼叫坐席"}},[t("span",{staticClass:"font"},[s._v(s._s(s.form.callSeat))])])],1)],1)],1)])]),s._v(" "),t("footer",{staticClass:"text-center"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:s.showEdit,expression:"showEdit"}],attrs:{type:"primary"},on:{click:s.save}},[s._v("保存")])],1),s._v(" "),t("mdf-password",{attrs:{show:s.showMdf,showPass:s.showPass},on:{"update:show":function(e){s.showMdf=e}}})],1)},staticRenderFns:[]};var h=t("Z0/y")(u,p,!1,function(s){t("UMjq")},"data-v-3f9d8ac8",null);e.default=h.exports}});
//# sourceMappingURL=22.cd27861b10e6bead7170.js.map