webpackJsonp([15],{"+VLN":function(e,t){},TwN6:function(e,t){e.exports={summaryFields:[{id:"stuId",label:"学员ID"},{id:"extendType",label:"推广类型"},{id:"projectName",label:"意向项目"},{id:"intentArea",label:"机会地域"},{id:"createTime",label:"创建时间"},{id:"lastAllocTime",label:"分配时间"},{id:"lastFollowTime",label:"最后跟进时间"},{id:"lastValidFollowTime",label:"最近有效跟进"}],baseFields:[{id:"nick",label:"昵称"},{id:"name",label:"真实姓名"},{id:"studentArea",label:"学员地域"},{id:"sexName",label:"性别"},{id:"age",label:"年龄"}],detailFields:[{id:"identityName",label:"身份"},{id:"levelName",label:"水平"},{id:"classTimeName",label:"计划上课时间"},{id:"startStudyTime",label:"开始学习时间"},{id:"purpose",label:"学习用途"}],identityOptions:[{id:0,label:"未知"},{id:1,label:"在职"},{id:2,label:"学生"},{id:3,label:"自雇"},{id:4,label:"待业"},{id:5,label:"自由职业"},{id:6,label:"家庭主妇"},{id:7,label:"其他"}],occupationOptions:[{id:0,label:"未知"},{id:1,label:"相关行业"},{id:2,label:"非相关行业"},{id:3,label:"年级：初中,高中,大学"},{id:4,label:"专业"},{id:5,label:"淘宝店"},{id:6,label:"实体店"},{id:7,label:"刚毕业"},{id:8,label:"辞职、失业"}],degreeOptions:[{id:1,label:"强"},{id:2,label:"中"},{id:3,label:"弱"},{id:4,label:"无"}],genderOptions:[{id:1,label:"男"},{id:2,label:"女"}],levelOptions:[{id:0,label:"未知"},{id:1,label:"零基础"},{id:2,label:"有点基础"},{id:3,label:"基础较好"}],idCardOptions:[{id:1,label:"中国大陆身份证"},{id:2,label:"港澳台身份证"}],classTimeOptions:[{id:0,label:"未知"},{id:1,label:"晚上"},{id:2,label:"周末"},{id:3,label:"业余时间"}],extendType:[{id:0,label:"未知"},{id:1,label:"百度推广"}],addFriendOptions:[{id:2,label:"微信"},{id:3,label:"QQ"}],followOptions:[{id:0,label:"隔天联系"},{id:1,label:"约定时间联系"},{id:2,label:"稍后在联系"},{id:3,label:"今晚联系"},{id:4,label:"不需要了"}],isItConnected:[{id:0,label:"接通"},{id:1,label:"无人接听"},{id:2,label:"空号"},{id:3,label:"停机/错号"}],studentContact:[{id:0,label:"手机"},{id:1,label:"座机"},{id:2,label:"微信"},{id:3,label:"QQ"}],communicateResults:[{id:0,label:"无效沟通"},{id:1,label:"有效沟通"}],backOut:[{id:0,label:"空号错号停机"},{id:1,label:"三次无们接听"},{id:2,label:"不符合报名条件"},{id:3,label:"没有符合的产品"},{id:4,label:"已报名其他机构"},{id:5,label:"号码错误"},{id:6,label:"明确表态不需要"},{id:7,label:"谈合作"},{id:8,label:"招聘"},{id:9,label:"打过去没有咨询过"}]}},"gh/s":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("4YfN"),i=l.n(a),n=l("9rMa"),s=l("s0MJ"),o=l("TwN6"),c={data:function(){return{validate:!0,student:{},province:[],provinceProps:{value:"id",label:"city",children:"cities"},contactList:[],projectOptions:[],intentProvinceIdFk:[],provinceIdFk:[],identityOptions:o.identityOptions,occupationOptions:o.occupationOptions,degreeOptions:o.degreeOptions,genderOptions:o.genderOptions,levelOptions:o.levelOptions,classTimeOptions:o.classTimeOptions,idCardOptions:o.idCardOptions}},computed:i()({},Object(n.d)({userInfo:function(e){return e.user.userInfo}})),created:function(){this.getStuBaseInfo(),this.qryAllProject(),this.qryArea()},methods:{getStuBaseInfo:function(){var e=this;this.API.getStuBaseInfo({stuId:this.$route.params.id}).then(function(t){var l=t.result[0].stuInfo;e.student=l;var a=t.result[0].contactList;a.forEach(function(e,t){e.validateMobile=!1,e.oldContact=e.contact}),e.contactList=a,e.intentProvinceIdFk=[l.intentProvinceIdFk,l.intentCityIdFk],e.provinceIdFk=[l.provinceIdFk,l.cityIdFk]}).catch(function(e){console.log(e.message)})},qryAllProject:function(){var e=this;this.API.qryAllProject().then(function(t){e.projectOptions=t.list}).catch(function(e){console.log(e.message)})},qryArea:function(e){var t=this;this.API.qryArea({areaId:1}).then(function(e){var l=e.result.map(function(e){return{id:e.id,city:e.province||e.city,cities:[]}});t.province=l,t.intentProvinceIdFk[1]&&t.handleProvinceChange(t.intentProvinceIdFk[0]),t.provinceIdFk[1]&&t.handleProvinceChange(t.provinceIdFk[0])})},handleProvinceChange:function(e,t){"YXDY"==t?(this.student.intentProvinceIdFk=e[0],this.student.intentCityIdFk=e[1]):"XYDY"==t&&(this.student.provinceIdFk=e[0],this.student.cityIdFk=e[1]);var l=this.province;this.API.qryArea({areaId:e[0]||e}).then(function(t){l.forEach(function(l){if(l.id==e[0]||l.id==e)return t.result[0].city?l.cities=t.result:l.cities="",!1})})},handleSubmit:function(){var e=this;if(this.student.cardNo)if(1==this.student.cardType){if(!Object(s.g)(this.student.cardNo))return void this.$message({message:"请输入正确的身份证号",type:"warning"})}else if(2==this.student.cardType&&!Object(s.b)(this.student.cardNo))return void this.$message({message:"请输入正确的港澳台证件号",type:"warning"});this.validate?this.API.mdfStuInfo({userIdFk:this.userInfo.userId,stuInfo:this.student,contactList:this.contactList}).then(function(t){e.$message({message:"保存成功",type:"success"}),e.$router.go(-1)}).catch(function(e){console.log(e.message)}):this.$message({message:"请检查表单",type:"error"})},handleMobileChange:function(e,t){this.validateEvent(e,t,s.c,0)},handlePhoneChange:function(e,t){this.validateEvent(e,t,s.d,1)},handleWXChange:function(e,t){this.validateEvent(e,t,s.f,2)},handleQQChange:function(e,t){this.validateEvent(e,t,s.e,3)},validateEvent:function(e,t,l,a){e.type==a&&(l(t)?(e.validateMobile=!1,this.validate=!0):(e.validateMobile=!0,this.validate=!1))},cardId:function(){}}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"student-info"},[l("h1",{staticClass:"title"},[e._v("编辑学员信息")]),e._v(" "),l("el-form",{ref:"updateForm",staticClass:"touch",attrs:{inline:!0,"label-width":"100px",size:"small"}},[l("div",{staticClass:"item"},[l("div",{staticClass:"student-hd"},[l("span"),e._v(" "),l("h3",[e._v("联系方式")])]),e._v(" "),l("el-row",{staticClass:"touch"},[e._l(e.contactList,function(t,a){return[0==t.type?l("el-col",{attrs:{span:8}},[l("el-form-item",{staticClass:"is-required",attrs:{label:"手机号："}},[l("el-input",{on:{change:function(l){e.handleMobileChange(t,t.contact)}},model:{value:t.contact,callback:function(l){e.$set(t,"contact",l)},expression:"item.contact"}}),e._v(" "),t.validateMobile?l("span",{staticClass:"el-form-item__error"},[e._v("请输入正确的手机号")]):e._e()],1)],1):1==t.type?l("el-col",{attrs:{span:8}},[l("el-form-item",{staticClass:"is-required",attrs:{label:"座机："}},[l("el-input",{on:{change:function(l){e.handlePhoneChange(t,t.contact)}},model:{value:t.contact,callback:function(l){e.$set(t,"contact",l)},expression:"item.contact"}}),e._v(" "),t.validateMobile?l("span",{staticClass:"el-form-item__error"},[e._v("请输入正确的座机号")]):e._e()],1)],1):2==t.type?l("el-col",{attrs:{span:8}},[l("el-form-item",{staticClass:"is-required",attrs:{label:"微信："}},[l("el-input",{on:{change:function(l){e.handleWXChange(t,t.contact)}},model:{value:t.contact,callback:function(l){e.$set(t,"contact",l)},expression:"item.contact"}}),e._v(" "),t.validateMobile?l("span",{staticClass:"el-form-item__error"},[e._v("请输入正确的微信号")]):e._e()],1)],1):3==t.type?l("el-col",{attrs:{span:8}},[l("el-form-item",{staticClass:"is-required",attrs:{label:"QQ："}},[l("el-input",{on:{change:function(l){e.handleQQChange(t,t.contact)}},model:{value:t.contact,callback:function(l){e.$set(t,"contact",l)},expression:"item.contact"}}),e._v(" "),t.validateMobile?l("span",{staticClass:"el-form-item__error"},[e._v("请输入正确的QQ号")]):e._e()],1)],1):e._e()]})],2)],1),e._v(" "),l("div",{staticClass:"item"},[l("div",{staticClass:"student-hd"},[l("span"),e._v(" "),l("h3",[e._v("学员概要")])]),e._v(" "),l("el-row",{staticClass:"touch"},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"意向度："}},[l("ul",{staticClass:"radio-group"},e._l(e.degreeOptions,function(t,a){return l("li",{key:a,class:a==e.student.degree-1?"cur":"",attrs:{label:t.label},on:{click:function(t){e.student.degree=a+1}}},[e._v(e._s(t.label))])}))])],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"意向项目："}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.student.intentSubject,callback:function(t){e.$set(e.student,"intentSubject",t)},expression:"student.intentSubject"}},e._l(e.projectOptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.proName,value:e.proId}})}))],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"意向地域："}},[l("el-cascader",{attrs:{options:e.province,"change-on-select":!0,clearable:"",props:e.provinceProps},on:{change:function(t){e.handleProvinceChange(t,"YXDY")}},model:{value:e.intentProvinceIdFk,callback:function(t){e.intentProvinceIdFk=t},expression:"intentProvinceIdFk"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"item"},[l("div",{staticClass:"student-hd"},[l("span"),e._v(" "),l("h3",[e._v("基本信息")])]),e._v(" "),l("el-row",{staticClass:"touch"},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"昵称："}},[l("el-input",{model:{value:e.student.nick,callback:function(t){e.$set(e.student,"nick",t)},expression:"student.nick"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"真实姓名："}},[l("el-input",{model:{value:e.student.name,callback:function(t){e.$set(e.student,"name",t)},expression:"student.name"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"学员地域："}},[l("el-cascader",{attrs:{options:e.province,"change-on-select":!0,clearable:"",props:e.provinceProps},on:{change:function(t){e.handleProvinceChange(t,"XYDY")}},model:{value:e.provinceIdFk,callback:function(t){e.provinceIdFk=t},expression:"provinceIdFk"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"性别："}},[l("ul",{staticClass:"radio-group"},e._l(e.genderOptions,function(t,a){return l("li",{key:a,class:a==e.student.sex-1?"cur":"",on:{click:function(t){e.student.sex=a+1}}},[e._v(e._s(t.label))])}))])],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"年龄："}},[l("el-input",{model:{value:e.student.age,callback:function(t){e.$set(e.student,"age",t)},expression:"student.age"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"身份证："}},[l("el-select",{staticStyle:{width:"40%"},attrs:{placeholder:"请选择"},on:{change:e.cardId},model:{value:e.student.cardType,callback:function(t){e.$set(e.student,"cardType",t)},expression:"student.cardType"}},e._l(e.idCardOptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.id}})})),e._v(" "),l("el-input",{staticStyle:{width:"55%"},model:{value:e.student.cardNo,callback:function(t){e.$set(e.student,"cardNo",t)},expression:"student.cardNo"}})],1)],1)],1)],1),e._v(" "),l("div",{staticClass:"item"},[l("div",{staticClass:"student-hd"},[l("span"),e._v(" "),l("h3",[e._v("详细信息")])]),e._v(" "),l("el-row",{staticClass:"touch"},[l("el-col",{attrs:{span:13}},[l("el-form-item",{attrs:{label:"身份："}},[l("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择"},model:{value:e.student.identity,callback:function(t){e.$set(e.student,"identity",t)},expression:"student.identity"}},e._l(e.identityOptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.id}})})),e._v(" "),l("el-select",{staticStyle:{width:"40%"},attrs:{placeholder:""},model:{value:e.student.intentSubject,callback:function(t){e.$set(e.student,"intentSubject",t)},expression:"student.intentSubject"}},e._l(e.occupationOptions,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.id}})}))],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"水平："}},[l("ul",{staticClass:"radio-group"},e._l(e.levelOptions,function(t,a){return l("li",{key:a,class:a==e.student.level?"cur":"",on:{click:function(l){e.student.level=t.id}}},[e._v(e._s(t.label))])}))])],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"计划上课时间：","label-width":"140px"}},[l("ul",{staticClass:"radio-group"},e._l(e.classTimeOptions,function(t,a){return l("li",{key:a,class:a==e.student.classTime?"cur":"",on:{click:function(t){e.student.classTime=a}}},[e._v(e._s(t.label))])}))])],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"开始学习时间：","label-width":"140px"}},[l("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.student.startStudyTime,callback:function(t){e.$set(e.student,"startStudyTime",t)},expression:"student.startStudyTime"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{staticClass:"textarea",attrs:{label:"学习用途："}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.student.purpose,callback:function(t){e.$set(e.student,"purpose",t)},expression:"student.purpose"}})],1)],1)],1)],1)]),e._v(" "),l("div",{staticClass:"ctr"},[l("el-button",{staticClass:"btn",attrs:{type:""},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),e._v(" "),l("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.handleSubmit()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var r=l("Z0/y")(c,d,!1,function(e){l("rCZg"),l("+VLN")},"data-v-283db3fe",null);t.default=r.exports},rCZg:function(e,t){}});
//# sourceMappingURL=15.f19c372e426abb2255f3.js.map